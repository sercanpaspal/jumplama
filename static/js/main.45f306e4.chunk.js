(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n.p+"static/media/block.f7a0aaaf.png"},34:function(e,t,n){e.exports=n.p+"static/media/red-bonus.6fe51ce6.png"},35:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAAAnCAYAAAAB4tQkAAAFG0lEQVR4Xu2bTUhUURTH36gZNbVQg1KckhIMzIEECfpeGbnoi4SKECvKjdAiol1Su4I2FUhBGBQVBEktgpYGBWEYGAaCRItKg75r0D7UeOd54811nvfNzH3v/o++2Rxn3nU8c+75nf859zkxK3oYi0BTzeJJ+4+XxQvJhxt9X2O29Xo9bEfR/Qs7Hib/HiVG9DATAVQQhF83zzRQYIY/fid78tIgWa/XHw7+CDWfUOMXRDaFGtggPgDH90QHAd0/secRqByzP4PPqBvJDYTr52oouovWrif788VTsq2nHIU1paToiq8To1mtqKigyoqABgK6f1wKXQSqIgJcNlL4iQ5q2UIn4Bc6HGU9cXaI7KfUuBFFRS8kOgEV7zUrFZUbqOggoPsHX+g0nOrPSlC5VNz/rTm4Yt3rWkchPdr+nOyV7hayexu7IBQVvZDouP2WN6jIcyCX1hIdBHT/0EANoqObE6CibaSs+OggNK2eIJcPXzxCtuDdK7J7Dj2DUFS0+EGBGoQzuodwLq0lOgjo/qGBGsTolbOicgIVfSPRQRD+iQQ8sN+ZWQ929EIoKnr8dBx25QxqEFUjKEXlAio6COj+obbmOkavOQEqesXlolib6pcTq4macrLHz/eRFV8m0F1oVe8nujr0+EGBqsMZ1cZke13eSNSKKxINHQR0/1AVX0dHp01ROYCKupFIoDbXl9JX7+xHKvWHLJJ/7mItF2LUQgIFqg5nslVM1XrE1ggBBLcPM8UwAlWVYTNf19nRaVNUDqCGVXHRQRD+dXbussYnLKuwIHPCtbTcpQttjRVkq5ZMLYz/peflCSd9Wk8Pkw3jWzQIhc4vvpCgIh7YmGqN0EHg4p8KCG6Kn8/opU1RUUBFqLioILj9spNmtOexNT5pWd/G5lEOlS5wZtK2ax8yK6nItClFTVQm6BXdp7+o8VMVDvm6ztFLO6j5VA2/gUBtLdFByOSfHfPPoxGofnMvm3U6OzrWoKLNWOggXN4ZpxPdWMkqyre6386s+bK4yFf+bVwzmrZOKOqt287//LbfT+WVT+iFzleQXIugQQ3jwAa1NUIHAd0/9ELnB9SgRq+8KqDtuM6qoQoEesVFB0HEV8Rxa7Iyo7J6Ka1Q1KBmU27xU+WrzsOunEANqmqoPjiXiosKQgRqfq25HL8wRy9PUBEPbLhVXDTFEokm4piMr0ibUWUllZ83bx+j9UWTjhLrmk3lAs2l0EGBGqYzKkXlAio6COj+oYJqcvRSKioSqOitGxfFEn4mqyvpFLh2vnP/dFnFUrIj70fIbqhOkb06UEL2WO0Xsk+G4mQHfhWT7R96m9MI5VWYUQuJydFrWoBNVg2VorpBLYhZ1uY6rMMQ2X9UECJQ/WZa+jqTHZ0vUG13kW6Ko1ZcrqA2bKki13t73pCVnwvFFIXH63pu6e/9W2iFDgpUk8743WhuoKKDgO4fWmtuYoaepqgcQEVv3WT/0EHYtnslufyo+zXZHfuSZB/c6U+bQYXCeV33W2j9rvNScNOKDwGqew60f0a9xWD7htYaebW+6CCg+4dW6Ex0dMpTXw6gom2krKioIMh+eimdPKPK63Sf+qLHDwpUE874bYm4tJboIKD7Jzom1EIXZkfnqaicQEXdSHQQsi2MptYLIFAVP4zDLuWN6jCrRraJgF5xs/080frMEUAHNYzRizWokWJFaJuMQJin0r5BVQXE1IGD+/QXrTVSxSy6zjsCKqUXn04HG/8A+L/er5Dqnc0AAAAASUVORK5CYIIA"},37:function(e,t,n){e.exports=n(58)},42:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(29),o=n.n(s),c=n(14),r=n(13),u=(n(42),n(4)),l=n(6),h=n(8),d=n(5),m=n(9),f=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"header"},i.a.createElement(c.b,{to:"/"},"Game"),i.a.createElement(c.b,{to:"/scoreboard"},"Score Board"))}}]),t}(i.a.Component),b=n(11),v=n(25),p=n.n(v),g=n(32),O=function(){function e(t,n){Object(u.a)(this,e),this.counter=0,this.stopped=!1,this.timer=n,this.callback=t}return Object(l.a)(e,[{key:"update",value:function(){this.stopped||(this.counter>this.timer&&(this.counter=0,this.callback()),this.counter++)}},{key:"stop",value:function(){this.stopped=!0}},{key:"start",value:function(){this.stopped=!1}}]),e}(),w=n(22),y=function(){function e(t,n,a,i,s,o){Object(u.a)(this,e),this.x=t,this.y=n,this.w=a,this.h=i,this.angle=s||0,this.scale=o||{w:1,h:1},this.vY=0,this.vX=0,this.speed=1,this.isPhysics=!0,this.collidable=!0,this.weight=1,this.id=Date.now()}return Object(l.a)(e,[{key:"update",value:function(){this.x+=this.vX*this.speed,this.y+=this.vY*this.speed,this.isPhysics&&this.physics()}},{key:"draw",value:function(){Q.ctx.save(),Q.ctx.translate(this.x+.5*this.w,this.y+.5*this.h),Q.ctx.rotate(this.angle*Math.PI/180),Q.ctx.scale(this.scale.w,this.scale.h),Q.ctx.translate(-(this.x+.5*this.w),-(this.y+.5*this.h)),Q.ctx.drawImage(this.image,this.x,this.y,this.w,this.h),Q.ctx.restore()}},{key:"onCollision",value:function(e){}},{key:"onCollisionExit",value:function(e){}},{key:"destroy",value:function(){var e=this;Q.nodes=Q.nodes.filter(function(t){return t.id!==e.id})}},{key:"physics",value:function(){this.vX>0?this.vX-=Q.xN:this.vX<0?this.vX+=Q.xN:this.vX=0,this.vY<Q.g?this.vY+=Q.vN*this.weight:this.vY=Q.g}}]),e}(),j=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){Object(w.a)(Object(d.a)(t.prototype),"update",this).call(this),this.tickCount=(this.tickCount||0)+1,this.tickCount>this.ticksPerFrame&&(this.tickCount=0,this.frameIndex=this.frameIndex<this.numberOfFrames-1?this.frameIndex+1:0)}},{key:"draw",value:function(){Q.ctx.save(),Q.ctx.translate(this.x+.5*this.w,this.y+.5*this.h),Q.ctx.rotate(this.angle*Math.PI/180),Q.ctx.scale(this.scale.w,this.scale.h),Q.ctx.translate(-(this.x+.5*this.w),-(this.y+.5*this.h)),Q.ctx.drawImage(this.image,this.frameIndex*this.w,0,this.w,this.h,this.x,this.y,this.w,this.h),Q.ctx.restore()}}]),t}(y),x={},E={};document.addEventListener("keydown",function(e){return x[e.key]=!0}),document.addEventListener("keyup",function(e){return x[e.key]=!1}),window.addEventListener("mousedown",function(e){return E[e.button]=!0}),window.addEventListener("mouseup",function(e){return E[e.button]=!1});var k=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"GetKeyDown",value:function(e){return!!x.hasOwnProperty(e)&&x[e]}},{key:"GetMouseButtonDown",value:function(e){return!!E.hasOwnProperty(e)&&E[e]}}]),e}(),A=function(e){function t(e,n){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e,n,50,50))).image=Q.image("block"),a.y=-a.h,a.speed=2,a}return Object(m.a)(t,e),t}(y),I=function(e){function t(e,n){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e,n,32,32))).image=Q.image("redBonus"),a.ticksPerFrame=4,a.numberOfFrames=6,a.y=-a.h,a.speed=4,a}return Object(m.a)(t,e),t}(j),S=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this,0,Q.canvas.height/2,39,39,90,{w:-1,h:1}))).image=Q.image("lama"),e.weight=2.5,e.towards=!1,e.ticksPerFrame=4,e.numberOfFrames=6,e.background="#F25244",e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){Object(w.a)(Object(d.a)(t.prototype),"update",this).call(this),(k.GetKeyDown(" ")||k.GetMouseButtonDown(0))&&this.onMove(),this.towards=this.x>Q.canvas.width/2,this.scale.h=this.towards?-1:1,this.x+this.w>Q.canvas.width?(this.x=Q.canvas.width-this.w,this.onWall()):this.x<0&&(this.x=0,this.onWall()),this.y>Q.canvas.height&&Q.over()}},{key:"onMove",value:function(){this.vY=-4,this.vX=10*(this.towards?-1:1)}},{key:"onWall",value:function(){this.vX=0,Q.score+=1}},{key:"onCollision",value:function(e){e instanceof A&&Q.bonusMode?(Q.score+=3,e.destroy()):e instanceof A?Q.over():e instanceof I&&(e.destroy(),Q.bonus())}}]),t}(j),B=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this,0,0))).isPhysics=!1,e.collidable=!1,e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"draw",value:function(){Q.ctx.fillStyle="#5E308C",Q.ctx.fillRect(0,0,Q.canvas.width,Q.canvas.height),Q.bonusMode&&(Q.ctx.fillStyle="#8C3FBF",Q.ctx.fillRect(0,0,Q.canvas.width,Q.canvas.height-Q.bonusTimer*(Q.canvas.height/Q.bonusTimeLimit))),Q.ctx.font="120px Arial",Q.ctx.fillStyle="#fff",Q.ctx.globalAlpha=.1,Q.ctx.textAlign="center",Q.ctx.textBaseline="middle",Q.ctx.fillText(Q.score,Q.canvas.width/2,Q.canvas.height/2),Q.ctx.globalAlpha=1}}]),t}(y),C=n(33),K=n.n(C),U=n(34),X=n.n(U),q=n(35),F=n.n(q),Q=function(){function e(t,n){Object(u.a)(this,e),e.scoreListener=n,e.canvas=t,e.ctx=e.canvas.getContext("2d"),e.canvas.width=300,e.canvas.height=500}return Object(l.a)(e,[{key:"start",value:function(){var t=this;cancelAnimationFrame(e.loopRef),e.isOver=!1,e.score=0,e.nodes=[],e.timers.BlockSpawner=new O(function(){return e.nodes.push(new A(e.rnd(0,e.canvas.width-50)))},100),e.timers.BonusSpawner=new O(function(){return e.nodes.push(new I(e.rnd(0,e.canvas.width-32)))},500),this.loadimages().then(function(){return t.init()})}},{key:"loadimage",value:function(){var t=Object(g.a)(p.a.mark(function t(n,a){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var i=new Image;i.onload=t(i),i.src=a,e.images[n]=i}));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadimages",value:function(){return Promise.all([this.loadimage("block",K.a),this.loadimage("redBonus",X.a),this.loadimage("lama",F.a)])}},{key:"init",value:function(){e.nodes.push(new B),e.nodes.push(new S),e.loopRef=requestAnimationFrame(this.loop.bind(this))}},{key:"loop",value:function(){if(e.isOver)return!1;for(var t in e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.bonusTimer++,e.bonusTimer>e.bonusTimeLimit&&(e.stopBonus(),e.bonusTimer=0),e.timers)e.timers[t].update();for(var n=0;n<e.nodes.length;n++){var a=e.nodes[n];a.update(),a.collidable&&this.coll(a),a.draw()}e.loopRef=requestAnimationFrame(this.loop.bind(this))}},{key:"coll",value:function(t){for(var n=0;n<e.nodes.length;n++){var a=e.nodes[n];t!==a&&a.collidable&&(this.boxColl(t,a)?t.onCollision(a):t.onCollisionExit(a))}}},{key:"boxColl",value:function(e,t){var n=e.x,a=e.y,i=n+e.w,s=a+e.h,o=t.x,c=t.y,r=o+t.w,u=c+t.h;return!(s<c||a>u||i<o||n>r)}}],[{key:"over",value:function(){e.scoreListener(e.score),e.score=0,e.isOver=!0}},{key:"bonus",value:function(){e.bonusTimer=0,e.bonusMode=!0,e.timers.BonusSpawner.stop()}},{key:"stopBonus",value:function(){e.bonusMode=!1,e.timers.BonusSpawner.start()}}]),e}();Q.bonusMode=!1,Q.bonusTimer=0,Q.bonusTimeLimit=600,Q.score=0,Q.nodes=[],Q.images={},Q.timers={},Q.timer=0,Q.g=1,Q.xN=.1,Q.vN=.1,Q.rnd=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},Q.image=function(e){return Q.images.hasOwnProperty(e)?Q.images[e]:new Image};var P=function(e){var t=e.handleScore,n=e.handleGame,s=i.a.useRef(null);return Object(a.useEffect)(function(){var e=new Q(s.current,t);e.start(),n(e)},[]),i.a.createElement("canvas",{ref:s})},V={position:"fixed",left:0,top:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.4)",zIndex:99,display:"flex",alignItems:"center",justifyContent:"center"},W={background:"#ffffff",padding:"5px"},T=function(e){var t=e.children;e.closeHandler;return e.show&&i.a.createElement("div",{style:V},i.a.createElement("div",{style:W,onClick:function(e){return e.stopPropagation()}},t))},R=n(26),H=n.n(R);H.a.initializeApp({apiKey:"AIzaSyCA9cjUYwaBus0bx-_T2AvKX2lpdtEA8kc",authDomain:"javascriptjumpergame.firebaseapp.com",databaseURL:"https://javascriptjumpergame.firebaseio.com",projectId:"javascriptjumpergame",storageBucket:"javascriptjumpergame.appspot.com",messagingSenderId:"511896107383",appId:"1:511896107383:web:449c8be3661faa1e"});var L=H.a.firestore(),G=function(e,t){return L.collection(e).doc().set(t)},D=function(e){return L.collection(e).orderBy("score","desc").limit(10).get()};function Y(e){var t=e.score,n=e.closeHandler,s=Object(a.useState)(!1),o=Object(b.a)(s,2),c=o[0],r=o[1],u=Object(a.useState)(!1),l=Object(b.a)(u,2),h=l[0],d=l[1],m=Object(a.useState)(""),f=Object(b.a)(m,2),v=f[0],p=f[1];Object(a.useEffect)(function(){},[]);return i.a.createElement("div",{id:"save-score"},i.a.createElement("h2",null,t," ",i.a.createElement("small",null,"PTS")),c?i.a.createElement("div",null,"Saved!"):i.a.createElement("div",null,i.a.createElement("input",{value:v,placeholder:"Username",onChange:function(e){return p(e.target.value)}}),i.a.createElement("button",{onClick:function(){d(!0),G("scoreboard",{score:t,username:v}).then(function(){r(!0),d(!1)})},disabled:h},"Save Score")),i.a.createElement("div",null,i.a.createElement("button",{onClick:n},"Play Again")))}function M(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(0),c=Object(b.a)(o,2),r=c[0],u=c[1],l=Object(a.useState)(null),h=Object(b.a)(l,2),d=h[0],m=h[1];Object(a.useEffect)(function(){document.title="Jumplama - Play"},[]);var f=function(){s(!1),d.start()};return i.a.createElement("div",null,i.a.createElement(T,{closeHandler:f,show:n},i.a.createElement(Y,{closeHandler:f,score:r})),i.a.createElement(P,{handleGame:function(e){return m(e)},handleScore:function(e){s(!0),u(e)}}))}function N(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(!0),c=Object(b.a)(o,2),r=c[0],u=c[1];return Object(a.useEffect)(function(){document.title="Jumplama - Scoreboard",D("scoreboard").then(function(e){var t=e.docs.map(function(e){return e.data()});s(t),u(!1)})},[]),r?i.a.createElement("div",null,"Loading..."):i.a.createElement("table",{id:"scoreboard"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Username"),i.a.createElement("th",null,"Score"))),i.a.createElement("tbody",null,n.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,e.username),i.a.createElement("td",null,e.score," ",i.a.createElement("small",null,"PTS")))})))}var z={display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"};o.a.render(i.a.createElement(c.a,null,i.a.createElement(r.c,null,i.a.createElement(r.a,{path:"/",component:function(){return i.a.createElement("div",null,i.a.createElement("div",{style:z},i.a.createElement(f,null),i.a.createElement(r.c,null,i.a.createElement(r.a,{exact:!0,path:"/",component:M}),i.a.createElement(r.a,{path:"/scoreboard",component:N}),i.a.createElement(r.a,{path:"*",component:M}))))}}))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.45f306e4.chunk.js.map